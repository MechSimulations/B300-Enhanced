<ModelBehaviors>
	<Include ModelBehaviorFile="Asobo\Generic.xml"/>


	<Macro Name="TransponderButtonEmissiveCode">
		(A:CIRCUIT GENERAL PANEL ON, Bool) (A:LIGHT POTENTIOMETER:#EMISSIVE_POTENTIOMETER#, percent over 100) *
	</Macro>

	<Template Name="ASOBO_5Knobs_Transponder_Template">
		<DefaultTemplateParameters>
			<ID>1</ID>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_GT_Helper_Suffix_ID_Appender">
			<TEMPLATE_TO_CALL>ASOBO_5Knobs_Transponder_SubTemplate</TEMPLATE_TO_CALL>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_5Knobs_Transponder_SubTemplate">
		<DefaultTemplateParameters>
			<NODE_ID_KNOB_SETTING>TRANSPONDER_Knob#SUFFIX_ID#</NODE_ID_KNOB_SETTING>
			<ANIM_NAME_KNOB_SETTING>TRANSPONDER_Knob#SUFFIX_ID#</ANIM_NAME_KNOB_SETTING>
			
			<NODE_ID_KNOB_THOUSANDS>TRANSPONDER_Knob_01#SUFFIX_ID#</NODE_ID_KNOB_THOUSANDS>
			<ANIM_NAME_KNOB_THOUSANDS>TRANSPONDER_Knob_01#SUFFIX_ID#</ANIM_NAME_KNOB_THOUSANDS>
			<NODE_ID_KNOB_HUNDREDS>TRANSPONDER_Knob_02#SUFFIX_ID#</NODE_ID_KNOB_HUNDREDS>
			<ANIM_NAME_KNOB_HUNDREDS>TRANSPONDER_Knob_02#SUFFIX_ID#</ANIM_NAME_KNOB_HUNDREDS>
			<NODE_ID_KNOB_TENS>TRANSPONDER_Knob_03#SUFFIX_ID#</NODE_ID_KNOB_TENS>
			<ANIM_NAME_KNOB_TENS>TRANSPONDER_Knob_03#SUFFIX_ID#</ANIM_NAME_KNOB_TENS>
			<NODE_ID_KNOB_ONES>TRANSPONDER_Knob_04#SUFFIX_ID#</NODE_ID_KNOB_ONES>
			<ANIM_NAME_KNOB_ONES>TRANSPONDER_Knob_04#SUFFIX_ID#</ANIM_NAME_KNOB_ONES>
			
			<NODE_ID_IDT>TRANSPONDER_Push_IDT#SUFFIX_ID#</NODE_ID_IDT>
			<ANIM_NAME_IDT>TRANSPONDER_Push_IDT#SUFFIX_ID#</ANIM_NAME_IDT>
		</DefaultTemplateParameters>

		<UseTemplate Name="ASOBO_Transponder_knob_Setting_Template">
			<ANIMREF_ID>0</ANIMREF_ID>
			<ANIMTIP_0>TT:COCKPIT.TOOLTIPS.XPDR_OFF</ANIMTIP_0>
			<ANIMTIP_0_ON_PERCENT>0</ANIMTIP_0_ON_PERCENT>
			<ANIMTIP_1>TT:COCKPIT.TOOLTIPS.XPDR_SBY</ANIMTIP_1>
			<ANIMTIP_1_ON_PERCENT>0.25</ANIMTIP_1_ON_PERCENT>
			<ANIMTIP_2>TT:COCKPIT.TOOLTIPS.XPDR_ON</ANIMTIP_2>
			<ANIMTIP_2_ON_PERCENT>.5</ANIMTIP_2_ON_PERCENT>
			<ANIMTIP_3>TT:COCKPIT.TOOLTIPS.XPDR_ALT</ANIMTIP_3>
			<ANIMTIP_3_ON_PERCENT>0.75</ANIMTIP_3_ON_PERCENT>
			<ANIMTIP_4>TT:COCKPIT.TOOLTIPS.XPDR_TEST</ANIMTIP_4>
			<ANIMTIP_4_ON_PERCENT>1</ANIMTIP_4_ON_PERCENT>
			<NODE_ID>#NODE_ID_KNOB_SETTING#</NODE_ID>
			<ANIM_NAME>#ANIM_NAME_KNOB_SETTING#</ANIM_NAME>
		</UseTemplate>
		
		<Component ID="IDENT_Light" Node="ANNUNCIATOR_Radio_Ident">
			<UseTemplate Name="ASOBO_GT_Emissive_Gauge">
				<EMISSIVE_CODE>
					(A:TRANSPONDER STATE:1, Enum) 2 ==
					(E:SIMULATION TIME, second) (I:XMLVAR_IDENT_Shutdown_Time) &lt; or
				</EMISSIVE_CODE> <!-- TODO -->
			</UseTemplate>
		</Component>
		
		<!-- <Component ID="State_Light" Node="TRANSPONDER_Light_Active"> -->
			<!-- <UseTemplate Name="ASOBO_GT_Emissive_Gauge"> -->
				<!-- <EMISSIVE_CODE>(A:TRANSPONDER STATE:1, Enum) 0 &gt;</EMISSIVE_CODE> -->
				<!-- <FAILURE>(A:CIRCUIT AVIONICS ON, Bool)</FAILURE> -->
			<!-- </UseTemplate> -->
		<!-- </Component> -->
		
		<Component ID="TRANSPONDER_Push_IDT" Node="#NODE_ID_IDT#">
			<UseTemplate Name="ASOBO_GT_Push_Button">
				<ANIM_NAME>#ANIM_NAME_IDT#</ANIM_NAME>
				<LEFT_SINGLE_CODE>
					(A:TRANSPONDER STATE:1, Enum) 0 != if{
						(E:SIMULATION TIME, second) 20 + (&gt;I:XMLVAR_IDENT_Shutdown_Time)
					}
				</LEFT_SINGLE_CODE>
				<WWISE_EVENT_1>transponder_push_button_on</WWISE_EVENT_1>
				<NORMALIZED_TIME_1>0.1</NORMALIZED_TIME_1>			
				<WWISE_EVENT_2>transponder_push_button_off</WWISE_EVENT_2> 
				<NORMALIZED_TIME_2>0.5</NORMALIZED_TIME_2>
				<TOOLTIPID>TT:COCKPIT.TOOLTIPS.YOKE_BUTTON_IDENT</TOOLTIPID>
			</UseTemplate>
		</Component>
		
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_4">
			<NODE_ID>#NODE_ID_KNOB_THOUSANDS#</NODE_ID>
			<ANIM_NAME>#ANIM_NAME_KNOB_THOUSANDS#</ANIM_NAME>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_3">
			<NODE_ID>#NODE_ID_KNOB_HUNDREDS#</NODE_ID>
			<ANIM_NAME>#ANIM_NAME_KNOB_HUNDREDS#</ANIM_NAME>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_2">
			<NODE_ID>#NODE_ID_KNOB_TENS#</NODE_ID>
			<ANIM_NAME>#ANIM_NAME_KNOB_TENS#</ANIM_NAME>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_1">
			<NODE_ID>#NODE_ID_KNOB_ONES#</NODE_ID>
			<ANIM_NAME>#ANIM_NAME_KNOB_ONES#</ANIM_NAME>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Simple_Transponder_Template">
		<DefaultTemplateParameters>
			<ID>1</ID>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_GT_Helper_Suffix_ID_Appender">
			<TEMPLATE_TO_CALL>ASOBO_Simple_Transponder_SubTemplate</TEMPLATE_TO_CALL>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Simple_Transponder_SubTemplate">
		<Component ID="Transponder_Buttons">
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>IDT</ID>
				<TOOLTIPID>TT:COCKPIT.TOOLTIPS.YOKE_BUTTON_IDENT</TOOLTIPID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>VFR</ID>
				<TOOLTIPID>TT:COCKPIT.TOOLTIPS.XPDR_VFR</TOOLTIPID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>CLR</ID>
				<TOOLTIPID>TT:COCKPIT.TOOLTIPS.XPDR_CLR</TOOLTIPID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>0</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>1</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>2</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>3</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>4</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>5</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>6</ID>
			</UseTemplate>
			<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
				<ID>7</ID>
			</UseTemplate>
		</Component>
	</Template>

	<!-- TODO - Complete -->
	<Template Name="ASOBO_Garmin_GTX330_Transponder_Template">
		<DefaultTemplateParameters>
			<ID>1</ID>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_GT_Helper_Suffix_ID_Appender">
			<TEMPLATE_TO_CALL>ASOBO_Garmin_GTX330_Transponder_SubTemplate</TEMPLATE_TO_CALL>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Garmin_GTX330_Transponder_SubTemplate">
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>ON</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>IDT</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>VFR</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>CLR</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>STBY</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>ALT</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>OFF</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>FUNC</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>CRSR</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>STARTSTOP</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>0</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>1</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>2</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>3</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>4</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>5</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>6</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>7</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>8</ID>
		</UseTemplate>
		<UseTemplate Name="ASOBO_Button_Transponder_ID_Template">
			<ID>9</ID>
		</UseTemplate>
	</Template>
		
	<!--
			Code to Handle a button on the transpoder
			Req. : #ID# - ID of the button 
	-->
	<Template Name="ASOBO_Button_Transponder_ID_Template">
		<DefaultTemplateParameters>
			<EMISSIVE_POTENTIOMETER>1</EMISSIVE_POTENTIOMETER>
			<BUTTON_EMISSIVE_FACTOR>1</BUTTON_EMISSIVE_FACTOR>
		</DefaultTemplateParameters>

		<Component ID="Transponder_Button_#ID#" Node="TRANSPONDER_Push_#ID##SUFFIX_ID#">
			<PartID>TRANSPONDER_Push_#ID#</PartID>
			<UseTemplate Name="ASOBO_GT_Push_Button_Emissive">
				<ANIM_NAME>TRANSPONDER_Push_#ID##SUFFIX_ID#</ANIM_NAME>
				<LEFT_SINGLE_CODE>(&gt;H:Transponder#ID#)</LEFT_SINGLE_CODE>
				<EMISSIVE_CODE>@TransponderButtonEmissiveCode #BUTTON_EMISSIVE_FACTOR# *</EMISSIVE_CODE>
				<WWISE_EVENT_1>transponder_push_button_on</WWISE_EVENT_1>
				<NORMALIZED_TIME_1>0.1</NORMALIZED_TIME_1>			
				<WWISE_EVENT_2>transponder_push_button_off</WWISE_EVENT_2> 
				<NORMALIZED_TIME_2>0.1</NORMALIZED_TIME_2>
			</UseTemplate>
		</Component>
	</Template>
		
	<Template Name="ASOBO_Simple_Transponder_With_Knob_Template">
		<DefaultTemplateParameters>
			<ID>1</ID>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_GT_Helper_Suffix_ID_Appender">
			<TEMPLATE_TO_CALL>ASOBO_Simple_Transponder_With_Knob_SubTemplate</TEMPLATE_TO_CALL>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Simple_Transponder_With_Knob_SubTemplate">
		<DefaultTemplateParameters>
			<KNOB_NODE_ID>TRANSPONDER_Knob#SUFFIX_ID#</KNOB_NODE_ID>
			<KNOB_ANIM_NAME>TRANSPONDER_Knob#SUFFIX_ID#</KNOB_ANIM_NAME>
			<ANIM_NEVER_FAILS/>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_Simple_Transponder_Template">
		</UseTemplate>
		<Component ID="TRANSPONDER_Frame#SUFFIX_ID#" Node="TRANSPONDER_Frame#SUFFIX_ID#">
			<UseTemplate Name="ASOBO_GT_Emissive_Gauge">
				<EMISSIVE_CODE>@TransponderButtonEmissiveCode</EMISSIVE_CODE>
			</UseTemplate>
		</Component>
		<UseTemplate Name="ASOBO_Transponder_knob_Setting_Template">
			<NODE_ID>#KNOB_NODE_ID#</NODE_ID>
			<ANIM_NAME>#KNOB_ANIM_NAME#</ANIM_NAME>
			<ANIMREF_ID>0</ANIMREF_ID>
			<ANIMTIP_0>TT:COCKPIT.TOOLTIPS.XPDR_OFF</ANIMTIP_0>
			<ANIMTIP_0_ON_PERCENT>0</ANIMTIP_0_ON_PERCENT>
			<ANIMTIP_1>TT:COCKPIT.TOOLTIPS.XPDR_SBY</ANIMTIP_1>
			<ANIMTIP_1_ON_PERCENT>0.25</ANIMTIP_1_ON_PERCENT>
			<ANIMTIP_2>TT:COCKPIT.TOOLTIPS.XPDR_TEST</ANIMTIP_2>
			<ANIMTIP_2_ON_PERCENT>.5</ANIMTIP_2_ON_PERCENT>
			<ANIMTIP_3>TT:COCKPIT.TOOLTIPS.XPDR_ON</ANIMTIP_3>
			<ANIMTIP_3_ON_PERCENT>0.75</ANIMTIP_3_ON_PERCENT>
			<ANIMTIP_4>TT:COCKPIT.TOOLTIPS.XPDR_ALT</ANIMTIP_4>
			<ANIMTIP_4_ON_PERCENT>1</ANIMTIP_4_ON_PERCENT>
		</UseTemplate>
	</Template>
		
	<Template Name="ASOBO_Transponder_knob_Value_Template_4">
		<DefaultTemplateParameters>
			<STEP></STEP>
			<DIGIT>1</DIGIT>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_3">
			<STEP>#STEP#0</STEP>
		</UseTemplate>
	</Template>
		
	<Template Name="ASOBO_Transponder_knob_Value_Template_3">
		<DefaultTemplateParameters>
			<STEP></STEP>
			<DIGIT>2</DIGIT>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_2">
			<STEP>#STEP#0</STEP>
		</UseTemplate>
	</Template>
		
	<Template Name="ASOBO_Transponder_knob_Value_Template_2">
		<DefaultTemplateParameters>
			<STEP></STEP>
			<DIGIT>3</DIGIT>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template_1">
			<STEP>#STEP#0</STEP>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Transponder_knob_Value_Template_1">
		<DefaultTemplateParameters>
			<STEP></STEP>
			<DIGIT>4</DIGIT>
		</DefaultTemplateParameters>
		
		<UseTemplate Name="ASOBO_Transponder_knob_Value_Template">
			<STEP>1#STEP#</STEP>
		</UseTemplate>
	</Template>

	<Template Name="ASOBO_Transponder_knob_Value_Template">
		<DefaultTemplateParameters>
			<NODE_ID>TRANSPONDER_Knob_0#DIGIT##SUFFIX_ID#</NODE_ID>
			<ANIM_NAME>TRANSPONDER_Knob_0#DIGIT##SUFFIX_ID#</ANIM_NAME>
			<WWISE_EVENT>transponder_knob_value</WWISE_EVENT> 
			<COUNT>8</COUNT>
		</DefaultTemplateParameters>
		
		<Component ID="#NODE_ID#" Node="#NODE_ID#">
			<UseTemplate Name="ASOBO_GT_Knob_Finite_Code">
				<CLOCKWISE_CODE>(&gt;K:XPNDR_#STEP#_INC)</CLOCKWISE_CODE>
				<ANTICLOCKWISE_CODE>(&gt;K:XPNDR_#STEP#_DEC)</ANTICLOCKWISE_CODE>
				<ANIM_CODE>800 (A:TRANSPONDER CODE:1, Number) #STEP# / int 10 % 100 * -</ANIM_CODE>
				<ANIM_LENGTH>800</ANIM_LENGTH>
				<ANIM_LAG>800</ANIM_LAG>
				<UPDATE_FREQUENCY>5</UPDATE_FREQUENCY>
			</UseTemplate>
		</Component>
	</Template>

	<Template Name="ASOBO_Transponder_knob_Setting_Template">
		<DefaultTemplateParameters>
			<NODE_ID>TRANSPONDER_Knob#SUFFIX_ID#</NODE_ID>
			<ANIM_NAME>TRANSPONDER_Knob#SUFFIX_ID#</ANIM_NAME>
			<WWISE_EVENT>transponder_mode_knob</WWISE_EVENT>    
			<COUNT>4</COUNT>
			<!-- position on knob is deifferent from enum value by default -->
			<POS_OFF>0</POS_OFF>
			<POS_STBY>1</POS_STBY>
			<POS_TEST>4</POS_TEST>
			<POS_ON>2</POS_ON>
			<POS_ALT>3</POS_ALT>
		</DefaultTemplateParameters>
		<OverrideTemplateParameters>
			<ENUM_VAL_OFF>0</ENUM_VAL_OFF>
			<ENUM_VAL_STBY>1</ENUM_VAL_STBY>
			<ENUM_VAL_TEST>2</ENUM_VAL_TEST>
			<ENUM_VAL_ON>3</ENUM_VAL_ON>
			<ENUM_VAL_ALT>4</ENUM_VAL_ALT>
			<SET_TRANSPONDER_STATE>(&gt;A:TRANSPONDER STATE:1, Enum)</SET_TRANSPONDER_STATE>
			<GET_TRANSPONDER_STATE>(A:TRANSPONDER STATE:1, Enum)</GET_TRANSPONDER_STATE>
		</OverrideTemplateParameters>
		
		<Component ID="#NODE_ID#" Node="#NODE_ID#">
			<UseTemplate Name="ASOBO_GT_Switch_5States">
				<SWITCH_DIRECTION>Horizontal</SWITCH_DIRECTION>
				<LEFTARROW>TurnLeft</LEFTARROW>
				<RIGHTARROW>TurnRight</RIGHTARROW>
				<CODE_POS_#POS_OFF#>#ENUM_VAL_OFF# #SET_TRANSPONDER_STATE# 0 (&gt;I:XMLVAR_IDENT_Shutdown_Time)</CODE_POS_#POS_OFF#>
				<CODE_POS_#POS_STBY#>#ENUM_VAL_STBY# #SET_TRANSPONDER_STATE#</CODE_POS_#POS_STBY#>
				<CODE_POS_#POS_ON#>#ENUM_VAL_ON# #SET_TRANSPONDER_STATE#</CODE_POS_#POS_ON#>
				<CODE_POS_#POS_ALT#>#ENUM_VAL_ALT# #SET_TRANSPONDER_STATE#</CODE_POS_#POS_ALT#>
				<CODE_POS_#POS_TEST#>#ENUM_VAL_TEST# #SET_TRANSPONDER_STATE#</CODE_POS_#POS_TEST#>
				<STATE#POS_OFF#_TEST>#GET_TRANSPONDER_STATE# #ENUM_VAL_OFF# ==</STATE#POS_OFF#_TEST>
				<STATE#POS_STBY#_TEST>#GET_TRANSPONDER_STATE# #ENUM_VAL_STBY# ==</STATE#POS_STBY#_TEST>
				<STATE#POS_ON#_TEST>#GET_TRANSPONDER_STATE# #ENUM_VAL_ON# ==</STATE#POS_ON#_TEST>
				<STATE#POS_ALT#_TEST>#GET_TRANSPONDER_STATE# #ENUM_VAL_ALT# ==</STATE#POS_ALT#_TEST>
				<STATE#POS_TEST#_TEST>#GET_TRANSPONDER_STATE# #ENUM_VAL_TEST# ==</STATE#POS_TEST#_TEST>
			</UseTemplate>
			<PartID>TRANSPONDER_KNOB</PartID>
		</Component>
	</Template>
</ModelBehaviors>